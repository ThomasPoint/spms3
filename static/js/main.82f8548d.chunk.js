(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){t.exports=n.p+"static/media/logo.5d5d9eef.svg"},17:function(t,e,n){},21:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(7),s=n.n(r),i=(n(14),n(1)),l=n(2),c=n(4),u=n(3),m=n(5),d=(n(16),n(17),n(19),function(t){function e(t){var n;Object(i.a)(this,e),(n=Object(c.a)(this,Object(u.a)(e).call(this,t))).eachPortfolios=function(t,e){return o.a.createElement(p,{name:t,key:e,index:e,remove:function(t){return n.removePortfolio(t)}})},n.addPortfolio=function(){if(n.state.curNumberPortfolio<10){var t=document.getElementById("portfolio_name").value;if(""===t)alert("Please give a name!");else{var e=n.state.portfolios;e.push(t);var a=n.state.curNumberPortfolio+1;n.setState({portfolios:e,curNumberPortfolio:a})}}else alert("The maximun number of portfolios is 10 !")},n.removePortfolio=function(t){var e=n.state.portfolios;e.splice(t,1);var a=n.state.curNumberPortfolio-1;localStorage.removeItem("portfolioState"+t),n.setState({portfolios:e,curNumberPortfolio:a})};return n.state={portfolios:[],curNumberPortfolio:0},n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"saveAppState",value:function(){localStorage.setItem("appState",JSON.stringify(this.state))}},{key:"componentDidMount",value:function(){this.setState(JSON.parse(localStorage.getItem("appState"))),window.addEventListener("beforeunload",this.saveAppState.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.saveAppState.bind(this)),this.saveAppState()}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:""},o.a.createElement("div",{className:"col-4 col-centered"},o.a.createElement("div",{className:"input-group input-group-sm mb-3 mt-3 ml-3",style:{width:"30rem"}},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-sm"},"Portfolio Name")),o.a.createElement("input",{id:"portfolio_name",type:"text",className:"form-control rounded","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm"}),o.a.createElement("button",{onClick:function(){return t.addPortfolio()},className:"btn btn-primary btn-sm ml-4 mr-4"},"Add Portfolio")),o.a.createElement("div",null,this.state.portfolios.map(this.eachPortfolios))))}}]),e}(a.Component)),p=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(c.a)(this,Object(u.a)(e).call(this,t))).deleteStock=function(t){var e=n.state.listStock,a=n.state.totalValue;a-=e[t].totalPrice,console.log(a),e.splice(t,1);var o=n.state.nbStock;o-=1,console.log(o),n.setState({listStock:e,nbStock:o,totalValue:a},function(){n.savePortfolioState()})},n.eachStock=function(t,e){return o.a.createElement(f,{symbol:t.symbol,shares:t.shares,unitPrice:t.unitPrice,totalPrice:t.totalPrice,key:e,index:e,deleteStock:function(t){return n.deleteStock(t)}})},n.showInDollar=function(){document.getElementById("dollar"+n.props.index).disabled=!0,document.getElementById("euros"+n.props.index).disabled=!1,"$"!==n.state.currency&&fetch("https://api.exchangeratesapi.io/latest?symbols=USD").then(function(t){return t.json()}).then(function(t){var e=t.rates.USD,a=n.state.listStock,o=0;a.forEach(function(t){t.unitPrice*=e,t.totalPrice*=e,o+=t.totalPrice}),n.setState({currency:"$",totalValue:o},function(){n.savePortfolioState()})}).catch(function(t){return alert("The symbol you want to add does not exist in the database")})},n.showInEuro=function(){document.getElementById("dollar"+n.props.index).disabled=!1,document.getElementById("euros"+n.props.index).disabled=!0,"\u20ac"!==n.state.currency&&fetch("https://api.exchangeratesapi.io/latest?symbols=USD").then(function(t){return t.json()}).then(function(t){var e=t.rates.USD,a=n.state.listStock,o=0;a.forEach(function(t){t.unitPrice/=e,t.totalPrice/=e,o+=t.totalPrice}),n.setState({currency:"\u20ac",totalValue:o},function(){n.savePortfolioState()})}).catch(function(t){return alert("The symbol you want to add does not exist in the database")})},n.state={listStock:[],nbStock:0,isAddingStock:!1,totalValue:0,currency:"$"},n}return Object(m.a)(e,t),Object(l.a)(e,[{key:"savePortfolioState",value:function(){var t="portfolioState"+this.props.index;localStorage.setItem(t,JSON.stringify(this.state))}},{key:"componentDidMount",value:function(){var t="portfolioState"+this.props.index;this.setState(JSON.parse(localStorage.getItem(t))),"$"===this.state.currency?null!==document.getElementById("dollar"+this.props.index)&&(document.getElementById("dollar"+this.props.index).disabled=!0):"\u20ac"===this.state.currency&&document.getElementById("euros"+this.props.index)&&(document.getElementById("euros"+this.props.index).disabled=!0)}},{key:"componentDidUpdate",value:function(){"$"===this.state.currency?null!==document.getElementById("dollar"+this.props.index)&&(document.getElementById("dollar"+this.props.index).disabled=!0):"\u20ac"===this.state.currency&&null!==document.getElementById("euros"+this.props.index)&&(document.getElementById("euros"+this.props.index).disabled=!0)}},{key:"showStockForm",value:function(){this.setState({isAddingStock:!0})}},{key:"addStockToPortfolio",value:function(){var t=this;if(this.state.nbStock<50||(this.state.listStock.find(function(e){return e.symbol===t.refs.symbol.value}),1)){var e=this.refs.symbol.value,n=this.refs.sharesNumber.value,a=this.state.nbStock,o=this.state.listStock,r=this.state.totalValue;fetch("https://api.iextrading.com/1.0/ref-data/symbols").then(function(t){return t.json()}).then(function(s){s.find(function(t){return t.symbol===e}),fetch("https://api.iextrading.com/1.0/tops/last?symbols="+e).then(function(t){return t.json()}).then(function(s){var i=s[0].price;"undefined"===typeof o.find(function(t){return t.symbol===e})&&a++,"\u20ac"===t.state.currency?fetch("https://api.exchangeratesapi.io/latest?symbols=USD").then(function(t){return t.json()}).then(function(s){var l=s.rates.USD;i/=l,o.push({symbol:e,shares:n,unitPrice:i,totalPrice:i*n}),r+=i*n,t.setState({isAddingStock:!1,listStock:o,nbStock:a,totalValue:r},function(){t.savePortfolioState()})}):"$"===t.state.currency&&(o.push({symbol:e,shares:n,unitPrice:i,totalPrice:i*n}),r+=i*n,t.setState({isAddingStock:!1,listStock:o,nbStock:a,totalValue:r},function(){t.savePortfolioState()}))}).catch(function(t){return alert("The symbol you want to add does not exist in the database")})})}else alert("Your portfolio already contains the maximum number of stock (50)")}},{key:"cancelAddingStock",value:function(){this.setState({isAddingStock:!1})}},{key:"renderStockForm",value:function(){var t=this;return o.a.createElement("div",null,o.a.createElement("h2",{className:"ml-3"},"Stock Form"),o.a.createElement("div",{className:"input-group input-group-sm mb-3 mt-3 ml-3",style:{width:"30rem"}},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-sm"},"Symbol")),o.a.createElement("input",{id:"symbol",ref:"symbol",type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm"})),o.a.createElement("div",{className:"input-group input-group-sm mb-3 mt-3 ml-3",style:{width:"30rem"}},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-sm"},"Number of shares")),o.a.createElement("input",{id:"sharesNumber",ref:"sharesNumber",type:"number",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm"})),o.a.createElement("button",{onClick:function(){return t.addStockToPortfolio()},className:"btn btn-success btn-sm ml-3 mr-4"},"Save"),o.a.createElement("button",{onClick:function(){return t.cancelAddingStock()},className:"btn btn-danger btn-sm"},"Cancel"))}},{key:"renderPortfolio",value:function(){var t=this;return o.a.createElement("div",{className:"card mt-3",style:{width:"30rem"}},o.a.createElement("div",{className:"card-body"},o.a.createElement("h2",{className:"card-title"},this.props.name),o.a.createElement("div",null,o.a.createElement("button",{id:"euros"+this.props.index,onClick:function(){return t.showInEuro()},className:"btn btn-link btn-sm mr-4"},"Show in \u20ac"),o.a.createElement("button",{id:"dollar"+this.props.index,onClick:function(){return t.showInDollar()},className:"btn btn-link btn-sm mr-4"},"Show in $")),o.a.createElement("div",null,o.a.createElement("table",{className:"table table-scroll"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"},"Stock Name"),o.a.createElement("th",{scope:"col"},"Unit Val (",this.state.currency,")"),o.a.createElement("th",{scope:"col"},"Qty"),o.a.createElement("th",{scope:"col"},"Tot Val (",this.state.currency,")"),o.a.createElement("th",null))),o.a.createElement("tbody",null,this.state.listStock.map(this.eachStock)))),o.a.createElement("p",null,"Portfolio total value : ",Number(this.state.totalValue).toFixed(2)," ",this.state.currency),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return t.showStockForm()},className:"btn btn-secondary btn-sm mr-4"},"Add Stock"),o.a.createElement("button",{className:"btn btn-secondary btn-sm mr-4"},"Graph Analysis"),o.a.createElement("button",{onClick:function(){return t.props.remove(t.props.index)},className:"btn btn-secondary btn-sm mr-4"},"Remove portfolio"))))}},{key:"render",value:function(){return this.state.isAddingStock?this.renderStockForm():this.renderPortfolio()}}]),e}(a.Component),f=function(t){function e(){return Object(i.a)(this,e),Object(c.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return o.a.createElement("tr",null,o.a.createElement("td",null,this.props.symbol),o.a.createElement("td",null,Number(this.props.unitPrice).toFixed(2)),o.a.createElement("td",null,this.props.shares),o.a.createElement("td",null,Number(this.props.totalPrice).toFixed(2)),o.a.createElement("td",null,o.a.createElement("button",{className:"btn btn-outline-danger btn-sm",onClick:function(){return t.props.deleteStock(t.props.index)}},"Delete Stock")))}}]),e}(a.Component),h=d;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},8:function(t,e,n){t.exports=n(21)}},[[8,2,1]]]);
//# sourceMappingURL=main.82f8548d.chunk.js.map